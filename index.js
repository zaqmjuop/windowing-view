parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({3:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){var e=$("iframe");return!!e&&(e.each(function(e,t){var r=($(t).attr("height")||"").match(/\d+%$/);if(r){var i=parseInt(r,10),n=$(t).parent().height()*(i/100);$(t).css("height",n+"px")}}),e)},t=function(){e(),window.onresize=function(){e()}};exports.resetIframeHeight=e,exports.supportIframeHeight=t;
},{}],4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./supportIframeHeight"),r=function(e){if(!e||e instanceof MouseEvent)return!1;var r="Microsoft Internet Explorer"===navigator.appName,t="right";switch(e.button){case 0:t="left";break;case 1:t=r?"left":"middle";break;case 4:t="middle";break;default:t="right"}return t},t=function(e){if(!e)return!1;var r=$(e).find(".header-drager")[0],t=$(e).find(".card-header")[0],n=$(e).find(".card-body")[0];if(!r||!t||!n)return!1;var o=t.offsetTop,a=25,f=t.lastElementChild;if(f){var i=f.offsetHeight,s=f.offsetTop;a=i+s}return function(r){var n=r.clientY-o;return n<a?(n=0,$(t).css({display:"none"})):$(t).css({display:""}),$("body").css({cursor:"n-resize"}),$(t).css({height:n+"px"}),e}},n=function(){var n=$(".card");if(!n)return!1;var o=$("<div>").addClass("curtain");return $(n).each(function(n,a){var f=$(a).find(".header-drager")[0];if(f){var i=t(a);$(f).on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),"left"===r(e)&&$(document).on("mousemove",i),$(o).insertBefore("#app")}),$(document).on("mouseup",function(){$("body").css({cursor:"default"}),$(document).off("mousemove",i),(0,e.resetIframeHeight)(),$(".curtain").remove()})}}),n},o=function(e){if(!e)return!1;var r=$(e).find(".left-drager")[0],t=$(e).find(".card-header")[0],n=$(e).find(".card-body")[0],o=$(e).parents(".col")[0],a=$(o).parent()[0];return!!(r&&t&&n&&o&&a)&&function(r){var t=o.offsetLeft,n=o.clientWidth,f=a.offsetWidth,i=n/f,s=$(o).css("flex-grow"),u=(t+n-(r.clientX-a.offsetLeft))/f/i*s;return $(o).css("flex-grow",u),$("body").css({cursor:"e-resize"}),e}},a=function(){var t=$(".card");if(!t)return!1;var n=$("<div>").addClass("curtain");return $(t).each(function(t,a){var f=$(a).find(".left-drager")[0];if(f){var i=o(a);$(f).on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),"left"===r(e)&&$(document).on("mousemove",i),$(n).insertBefore("#app")}),$(document).on("mouseup",function(){$("body").css({cursor:"default"}),$(document).off("mousemove",i),(0,e.resetIframeHeight)(),$(".curtain").remove()})}}),t},f=function(){n(),a()};exports.default=f;
},{"./supportIframeHeight":3}],11:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}();function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,r=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,c=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,i="mydb",s=function(){function r(n){var t=this;o(this,r);var s=n;if("string"==typeof n&&(s={keyPath:!1}),!(s instanceof Object))return!1;this.DBOpenRequest=r.openDB(i,2),this.DBOpenRequest.onerror=function(){console.log("你禁用了indexedDB!")},this.DBOpenRequest.onupgradeneeded=function(e){console.log("正在更新数据库..."),t.db=e.target.result;var n=t.db.createObjectStore(i,{keyPath:"id",autoIncrement:!0});s=Object.assign(s,{date:!1,id:!0});var o=Object.keys(s);console.log(o),o.forEach(function(e){n.createIndex(e,e,{unique:s[e]})}),t.db.onerror=function(){console.log("数据库加载失败")}},this.DBOpenRequest.onsuccess=function(){t.db=t.DBOpenRequest.result,t.add=function(n){if("object"!==(void 0===n?"undefined":e(n)))return!1;var o={date:new Date};Object.assign(o,n);var r=t.db.transaction(i,"readwrite").objectStore(i),c=r.add(o);return c.onsuccess=function(){console.log("保存一条记录"),console.log(c.result)},c.onerror=function(e){console.error(e.target.error)},r},t.put=function(n){if("object"!==(void 0===n?"undefined":e(n)))return!1;var o={date:new Date};Object.assign(o,n);var r=t.db.transaction(i,"readwrite").objectStore(i),c=r.put(o);return c.onsuccess=function(){console.log("更新一条记录"),console.log(c.result)},c.onerror=function(e){console.error(e.target.error)},r},t.get=function(e){var n=t.db.transaction(i,"readwrite").objectStore(i),o=n.get(e);return o.onsuccess=function(){console.log("取出一条记录"),console.log(o.result)},o.onerror=function(e){console.error(e.target.error)},n},t.delete=function(e){var n=t.db.transaction(i,"readwrite").objectStore(i),o=n.delete(e);return o.onsuccess=function(){console.log("删除一条记录"),console.log(o.result)},o.onerror=function(e){console.error(e.target.error)},n},t.getAll=function(){var e=t.db.transaction(i,"readwrite").objectStore(i).getAll();return e.onsuccess=function(){console.log(e.result)},e.onerror=function(e){console.error(e.target.error)},e},t.upperBound=function(e){if(!e)return!1;var n=c.upperBound(e),o=t.db.transaction(i).objectStore(i).index("id").openCursor(n);return o.onsuccess=function(e){var n=e.target.result;n&&(console.log(n.value),n.continue())},o.onerror=function(e){console.log(e.target.result)},n}}}return n(r,null,[{key:"openDB",value:function(e,n){return"string"==typeof e&&"number"==typeof n&&(!!t&&t.open(e,parseInt(n,10)))}}]),r}(),u=new s({url:!0});u.saveVisited=function(e){return!(!e||"string"!=typeof e)&&u.add({url:e})},exports.visiteds=u;
},{}],13:[function(require,module,exports) {
module.exports=n;var t=/^(?:\w+:)?\/\/(\S+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,e=/^[^\s\.]+\.\S{2,}$/;function n(n){if("string"!=typeof n)return!1;var o=n.match(t);if(!o)return!1;var s=o[1];return!!s&&!(!r.test(s)&&!e.test(s))}
},{}],12:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatURL=exports.validateURL=exports.isEnterKey=exports.isAliveElement=void 0;var e=require("is-url"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return e&&1===e.nodeType&&$(e).parent("html")},n=function(e){return 13===e.keyCode},i=function(e){if(!t.default)throw new Error("isUri 未能成功加载");return(0,t.default)(e)?e:void 0},s=function(e){return!(!e||"string"!=typeof e)&&(e.match(/^http[s]?:[/]{2}/)?e:"http://"+e)};exports.isAliveElement=o,exports.isEnterKey=n,exports.validateURL=i,exports.formatURL=s;
},{"is-url":13}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./store"),e=require("./tool"),a=require("./supportIframeHeight"),n=function(){var r=$("<div>").addClass("absolute-center").attr("name","loading")[0],e=$("<i>").addClass("fa fa-spinner fa-pulse loading fa-2x")[0];return $(r).append(e),r},d=function(r){if(!r||"IFRAME"!==r.tagName)throw new Error("参数应该是<iframe>");var e=$(r).parents(".iframe-holder")[0];if(!e)throw new Error('<iframe>应该包含在<div class="iframe-holder">之内');var n=$(e).find("*[name=loading]")[0];n&&!$(n).hasClass("hide")&&$(n).addClass("hide"),$(r).removeClass("hide"),(0,a.resetIframeHeight)()},i=function(){var r=$("<iframe>").attr("width","100%").attr("height","100%").addClass("page none")[0];return $(r).on("load",function(){d(r)}),r},t=function(r){if(!r||!$(r).hasClass("card-body"))throw new ReferenceError('bindEmbeddedBodyIframes的参数应该是一个包含class="card-body"的<div>元素');var e=$(r).find("iframe");if(!e)throw new Error("bindEmbeddedBodyIframes的参数元素不包含<iframe>");return e.each(function(r,e){$(e).on("load",function(){d(e)})}),r},o=function(a){if(!a)throw new Error("embeddedSubmit的参数不能为空");var d=$(a).parents(".input-group")[0];if(!d)throw new Error('submit应该有父元素<div class="input-group">');var t=$(d).find("input[type=text]")[0];if(!t)throw new Error("submit应该有一个<input type=text>的相邻元素");var o=$(t).val();r.visiteds.saveVisited(o);var s=(0,e.validateURL)((0,e.formatURL)(o))||"https://www.baidu.com/s?ie=UTF-8&wd="+o,f=$(a).parents(".card-body")[0];if(!f)throw new Error('submit应该有class="card-body"的父元素');var c=$(f).find("div[name=homepage]")[0];if(!c)throw new Error('embedded 应该包含 <div name="homepage">的元素');var u=$(f).find(".iframe-holder")[0];if(!u)throw new Error('embedded 应该包含 <div class="iframe-holder">的元素');var l=$(u).find("*[name=loading]")[0];try{if(!l)throw new Error("iframeHolder 应该包含 loading 加载图标")}catch(r){$(u).append(n())}var m=$(u).find("iframe")[0];try{if(!m)throw new Error("iframeHolder 应该包含 <iframe> 元素")}catch(r){$(u).append(i())}return $(c).hasClass("hide")||$(c).addClass("hide"),$(u).removeClass("hide"),$(l).removeClass("hide"),$(m).hasClass("hide")||$(m).addClass("hide"),$(m).attr("src",s),a},s=function(r){if(!r)throw new Error("bindEmbeddedSubmits的参数不能为空");if(!$(r).hasClass("card-body"))throw new Error('bindEmbeddedSubmits的参数应有class="card-body"标记');if(!$(r).parents(".embedded-control"))throw new Error('bindEmbeddedSubmits的参数应该有父元素带有标记class="embedded-control"');var e=$(r).find("button[name=submit]");return!!e&&(e.each(function(r,e){$(e).on("click",function(){o(e)})}),r)},f=function(a){if(!a||"INPUT"!==a.tagName)throw new Error("参数不是一个<input>");var n=$(a).parent(".input-group")[0];if(!n)throw new Error('这个<input>应该有父元素<div class="input-group">');var d=$(n).find("button[name=submit]");if(!d)throw new Error('这个<input>应该有相邻元素<button name="submit">');$(a).on("keypress",function(r){(0,e.isEnterKey)(r)&&d.click()}),$(a).on("focus",function(){var e=r.visiteds.getAll();$(e).on("success",function(){var r=e.result;if(!(r&&r instanceof Array))return!1;var a=$("#urls");return a.html(""),r.forEach(function(r){var e=$("<option>").attr("value",r.url);a.append(e)}),r})})},c=function(r){if(!r||!$(r).hasClass("card-body"))throw new ReferenceError('initEmbeddedBody的参数应该是一个包含class="card-body"的<div>元素');var e=$(r).find("input[type=text]");if(!e)throw new Error('<div class="card-body"> 内没有<input>');return e.each(function(r,e){f(e)}),r},u=function(r){if(!r||!$(r).hasClass("embedded-control"))throw new ReferenceError('initEmbeddedBody的参数应该是一个包含class="embedded-control"的<div>元素');var e=$(r).find(".card-body")[0];try{if(!e)throw new ReferenceError("embedded-control 没有 card-body")}catch(a){a instanceof ReferenceError&&(e=$("<div>").addClass("card-body entrance"),$(r).append(e))}return t(e),s(e),c(e),!0};exports.default=u;
},{"./store":11,"./tool":12,"./supportIframeHeight":3}],5:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./embeddedBody"),d=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var r=function(){var e=$(".embedded-control");return!!e&&($(e).each(function(e,t){$(t).attr("id","embedded-"+e),(0,d.default)(t)}),e)};exports.default=r;
},{"./embeddedBody":9}],1:[function(require,module,exports) {
"use strict";var e=require("./supportIframeHeight"),r=require("./drager"),u=a(r),t=require("./embedded"),d=a(t);function a(e){return e&&e.__esModule?e:{default:e}}$(document).ready(function(){return!!document.querySelector&&((0,e.supportIframeHeight)(),(0,d.default)(),(0,u.default)(),!0)});
},{"./supportIframeHeight":3,"./drager":4,"./embedded":5}]},{},[1])
//# sourceMappingURL=/index.map