{"version":3,"sources":["node_modules/is-url/index.js","assets/scripts/index.js"],"names":["isAliveElement","element","nodeType","$","parent","isEnterKey","event","keyCode","resetIframeHeight","each","index","height","attr","perHeight","match","per","parseInt","css","initIframe","iframe","children","tagName","removeChild","removeClass","newPage","option","loadingIcon","addClass","loading","append","page","url","on","holder","formatURL","val","hasPrefix","validateURL","Error","undefined","entranceSumit","entrance","hasClass","input","find","value","html","bindEntranceInput","submit","click","bindEntranceSubmit","button","bindEntrance","i","supportIframeHeight","window","onresize","document","ready","querySelector"],"mappings":"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","file":"scripts.0e529548.map","sourceRoot":"../windowing","sourcesContent":["\n/**\n * Expose `isUrl`.\n */\n\nmodule.exports = isUrl;\n\n/**\n * RegExps.\n * A URL must match #1 and then at least one of #2/#3.\n * Use two levels of REs to avoid REDOS.\n */\n\nvar protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\n\nvar localhostDomainRE = /^localhost[\\:?\\d]*(?:[^\\:?\\d]\\S*)?$/\nvar nonLocalhostDomainRE = /^[^\\s\\.]+\\.\\S{2,}$/;\n\n/**\n * Loosely validate a URL `string`.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nfunction isUrl(string){\n  if (typeof string !== 'string') {\n    return false;\n  }\n\n  var match = string.match(protocolAndDomainRE);\n  if (!match) {\n    return false;\n  }\n\n  var everythingAfterProtocol = match[1];\n  if (!everythingAfterProtocol) {\n    return false;\n  }\n\n  if (localhostDomainRE.test(everythingAfterProtocol) ||\n      nonLocalhostDomainRE.test(everythingAfterProtocol)) {\n    return true;\n  }\n\n  return false;\n}\n","'use strict';\n\nimport isUri from 'is-url';\n\nconst isAliveElement = element => (element && element.nodeType === 1 && $(element).parent('html'));\n\nconst isEnterKey = event => (event.keyCode === 13);\n\nconst resetIframeHeight = () => {\n  $('iframe').each((index, element) => {\n    if (!element) { return; }\n    let height = $(element).attr('height') || '';\n    const perHeight = height.match(/\\d+%$/);\n    if (!perHeight) { return; }\n    const per = parseInt(perHeight, 10);\n    height = $(element).parent().height() * (per / 100);\n    $(element).css('height', `${height}px`);\n  });\n};\n\nconst initIframe = (iframe) => {\n  if (!iframe) return false;\n  const parent = $(iframe).parent()[0];\n  $(parent).children().each((index, element) => {\n    if (element.tagName !== 'IFRAME') {\n      parent.removeChild(element);\n    }\n  });\n  $(iframe).removeClass('hide');\n  resetIframeHeight();\n  return iframe;\n};\n\nconst newPage = (option) => {\n  const loadingIcon = $('<i>').addClass('fa fa-spinner fa-pulse loading fa-2x');\n  const loading = $('<div>').addClass('absolute-center').append(loadingIcon); // 加载图标\n\n  const page = $('<iframe>')\n    .attr('src', (option.url || ''))\n    .attr('width', '100%')\n    .attr('height', '100%')\n    .addClass('page')\n    .addClass('hide');\n  $(page).on('load', () => {\n    initIframe(page);\n  });\n\n  const holder = $('<div>').addClass('iframe-holder');\n\n  holder.append(loading).append(page);\n\n  return holder;\n};\n\nconst formatURL = (val) => {\n  if ((!val) || (typeof val !== 'string')) return false;\n  const hasPrefix = val.match(/^http[s]?:[/]{2}/);\n  if (!hasPrefix) {\n    return `http://${val}`;\n  }\n  return val;\n};\n\nconst validateURL = (val) => {\n  if (!isUri) throw new Error('isUri 未能成功加载');\n  return (isUri(val) ? val : undefined);\n};\n\n// const sendFeedback = (input, isValid, feedback) => {\n//   if (!isAliveElement(input)) return false;\n//   if ((!feedback) || (typeof feedback !== 'string')) return false;\n//   const inputClass = (isValid) ? 'is-valid' : 'is-invalid';\n//   const feedbackClass = (isValid) ? 'valid-tooltip' : 'invalid-tooltip';\n//   let place = $(input).next('.feedback')[0];\n//   if (!place) {\n//     place = $('<div>').addClass('feedback').insertAfter(input);\n//   }\n//   $(input).removeClass('is-valid is-invalid').addClass(inputClass);\n//   $(place).text(feedback).removeClass('valid-tooltip invalid-tooltip').addClass(feedbackClass);\n//   return feedback;\n// };\n\n// const validFeedback = (input, feedback) => (sendFeedback(input, true, feedback));\n\n// const invalidFeedback = (input, feedback) => (sendFeedback(input, false, feedback));\n\nconst entranceSumit = (entrance) => {\n  if (!entrance) return false;\n  if (!$(entrance).hasClass('entrance')) return false;\n  const input = $(entrance).find('input[type=text]')[0];\n  if ((!input) || (!input.value)) return false;\n  const val = $(input).val();\n  const url = validateURL(formatURL(val)) || `https://www.baidu.com/s?ie=UTF-8&wd=${val}`;\n  const page = newPage({ url });\n  $(entrance).html(page);\n  return entrance;\n};\n\nconst bindEntranceInput = (entrance) => {\n  if (!(entrance && $(entrance).hasClass('entrance'))) return false;\n  const input = $(entrance).find('input[type=text]')[0];\n  if (!input) return false;\n  $(input).on('keypress', (event) => {\n    if (isEnterKey(event)) {\n      const submit = $(entrance).find('.submit');\n      if (!submit) return;\n      submit.click();\n    }\n  });\n  return entrance;\n};\n\nconst bindEntranceSubmit = (entrance) => {\n  if (!(entrance && $(entrance).hasClass('entrance'))) return false;\n  const button = $(entrance).find('button')[0];\n  if (!button) return false; // 提交按钮\n  $(button).on('click', () => { entranceSumit(entrance); });\n  return entrance;\n};\n\nconst bindEntrance = () => {\n  let i = 0;\n  $('.entrance').each((index, entrance) => {\n    if (!entrance) return;\n    i += 1;\n    $(entrance).attr('id', `entrance-${i}`);\n    bindEntranceSubmit(entrance);\n    bindEntranceInput(entrance);\n  });\n};\n\nconst supportIframeHeight = () => {\n  resetIframeHeight();\n  window.onresize = () => {\n    resetIframeHeight();\n  };\n};\n\n$(document).ready(() => {\n  if (!document.querySelector) return false;\n  supportIframeHeight();\n  bindEntrance();\n  return true;\n});\n\n// todo\n// 左右视窗比率调整\n// 移动端改为上下分屏\n// 输入框快捷方式\n// 前进后退 历史记录\n// 提供一个输入框随时修改网址\n// 把验证单独拿出来\n// 加载iframe\n// 先放一个加载中icon√。 body添加一个iframe display=none onload='show' settimeout每秒检查一次状态 超过10秒不行就提示失败\n// 因为同源问题 不能删除iframe内的a标签的target\n// 解决方法\n// 或者是server render\n// 或者是jq ajax jsonp get (选择)\n//\n// 模块化 三段式\n//\n//\n//\n"]}